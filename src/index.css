@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Capacitor / Mobile Notch Handling */
    --safe-area-top: env(safe-area-inset-top, 0px);
    --safe-area-bottom: env(safe-area-inset-bottom, 0px);
    --safe-area-left: env(safe-area-inset-left, 0px);
    --safe-area-right: env(safe-area-inset-right, 0px);
    
    /* VinPro Brand Colors */
    --color-vinpro-blue: 37 99 235; /* #2563eb */
  }

  html {
    @apply h-full overflow-hidden antialiased bg-slate-950;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }

  body {
    @apply h-full m-0 p-0 font-sans select-none overflow-hidden;
    @apply bg-slate-950 text-slate-200 transition-colors duration-300;
    -webkit-text-size-adjust: 100%;
  }

  /* --- FIXED SCANNER TRANSPARENCY --- */
  /* We make the backgrounds transparent, but NOT the content itself */
  body.barcode-scanner-active,
  body.barcode-scanner-active #root,
  body.barcode-scanner-active .main-content,
  body.barcode-scanner-active .sidebar {
    @apply bg-transparent !important;
    background-image: none !important;
  }

  /* Ensure the header/nav stays visible during scan if needed, or hide everything else */
  /* If you want the header to stay, don't hide it here */
  body.barcode-scanner-active .dashboard-card,
  body.barcode-scanner-active .glass-panel {
    @apply opacity-0 pointer-events-none;
  }

  #root {
    @apply h-full flex flex-col;
  }

  ::-webkit-scrollbar { width: 4px; }
  ::-webkit-scrollbar-track { @apply bg-transparent; }
  ::-webkit-scrollbar-thumb { @apply bg-slate-800 rounded-full hover:bg-blue-600 transition-colors; }
}

@layer components {
  /* --- Layout & Navigation --- */
  
  .sidebar {
    padding-top: calc(1rem + var(--safe-area-top));
    padding-left: calc(1rem + var(--safe-area-left));
    padding-bottom: var(--safe-area-bottom);
    @apply bg-slate-900 border-r border-slate-800 w-64 h-full transition-all;
    /* Ensure sidebar stays on top of camera but allows transparency */
    z-index: 50; 
  }

  .main-content {
    padding-top: var(--safe-area-top);
    padding-bottom: var(--safe-area-bottom);
    padding-left: var(--safe-area-left);
    padding-right: var(--safe-area-right);
    @apply flex-grow overflow-y-auto overflow-x-hidden;
  }

  /* --- VinPro Custom UI --- */

  .sidebar-link {
    @apply flex items-center gap-3 px-4 py-3 rounded-xl transition-all;
    @apply hover:bg-slate-800 text-slate-400 hover:text-white;
  }

  .sidebar-link-active {
    @apply bg-blue-600/10 text-blue-500 font-bold;
  }

  .dashboard-card {
    @apply bg-slate-900/50 border border-slate-800 p-6 rounded-[2rem] shadow-xl transition-all;
  }

  .glass-panel {
    @apply bg-slate-900/80 backdrop-blur-md border border-slate-800 rounded-3xl transition-all;
  }

  /* --- Scanner UI Components --- */
  .scanner-ui-overlay {
    @apply fixed inset-0 z-[9999] flex flex-col items-center justify-center p-6 bg-transparent;
    /* Pointer events handled by children so you can still click 'Cancel' */
  }

  .scanner-laser {
    @apply absolute top-0 left-0 w-full h-1 bg-blue-500 shadow-[0_0_15px_rgba(37,99,235,1)];
    animation: scan-line 2s linear infinite;
  }
}

@layer utilities {
  .pt-safe { padding-top: var(--safe-area-top); }
  .pb-safe { padding-bottom: var(--safe-area-bottom); }
  .mt-safe { margin-top: var(--safe-area-top); }
  .mb-safe { margin-bottom: var(--safe-area-bottom); }
  
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

  @keyframes scan-line {
    0% { top: 0%; opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { top: 100%; opacity: 0; }
  }
}